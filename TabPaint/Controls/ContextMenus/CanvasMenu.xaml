<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:TabPaint" 
                    xmlns:controls="clr-namespace:TabPaint.Controls"
                    x:Class="TabPaint.CanvasMenuResources">
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    <ContextMenu  x:Key="MainImageCtxMenu"  Style="{StaticResource Win11ContextMenuStyle}"
                  xmlns:services="clr-namespace:TabPaint.Services">
        <MenuItem Header="{DynamicResource L_Main_Ctx_Copy}" services:ShortcutService.ShortcutKey="Edit.Copy" Style="{StaticResource Win11MenuItemStyle}" Tag ="Copy">
                <MenuItem.Icon>
                    <Path Data="{DynamicResource Copy_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                </MenuItem.Icon>
            </MenuItem>
        <MenuItem Header="{DynamicResource L_Main_Ctx_Cut}" services:ShortcutService.ShortcutKey="Edit.Cut" Style="{StaticResource Win11MenuItemStyle}" Tag ="Cut">
                <MenuItem.Icon>
                    <Path Data="{DynamicResource Cut_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                </MenuItem.Icon>
            </MenuItem>
        <MenuItem Header="{DynamicResource L_Main_Ctx_Paste}" services:ShortcutService.ShortcutKey="Edit.Paste" Style="{StaticResource Win11MenuItemStyle}" Tag ="Paste">
                <MenuItem.Icon>
                    <Path Data="{DynamicResource Paste_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                </MenuItem.Icon>
            </MenuItem>

            <Separator Style="{StaticResource Win11MenuSeparatorStyle}"/>
            <MenuItem Header="{DynamicResource L_Main_Ctx_FixedZoom}" 
                                IsCheckable="True" 
                                Style="{StaticResource Win11MenuItemStyle}"
                                DataContext="{Binding Source={x:Static local:SettingsManager.Instance}, Path=Current}"
                                IsChecked="{Binding IsFixedZoom, Mode=TwoWay}"> 
                <MenuItem.Icon>
                    <Path Data="{DynamicResource Pin_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="{DynamicResource L_Main_Ctx_ShowRulers}" IsCheckable="True" 
Style="{StaticResource Win11MenuItemStyle}"
DataContext="{Binding Source={x:Static local:SettingsManager.Instance}, Path=Current}"
IsChecked="{Binding ShowRulers, Mode=TwoWay}">
                <MenuItem.Icon>
                    <TextBlock Text="📏" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextPrimaryBrush}"/>
                </MenuItem.Icon>
            </MenuItem>
            <Separator Style="{StaticResource Win11MenuSeparatorStyle}"/>

            <!-- 二级菜单：小工具 -->
            <controls:DelayedMenuItem x:Name="miniTools" 
                Header="{DynamicResource L_Main_Ctx_MiniTools}" 
                Style="{StaticResource Win11MenuItemStyle}"
                CloseDelay="300">
                <MenuItem.Icon>
                    <Path Data="{DynamicResource Wrench_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                </MenuItem.Icon>

            <MenuItem Header="{DynamicResource L_Main_Ctx_AI_RemoveBg}" Style="{StaticResource Win11MenuItemStyle}" services:ShortcutService.ShortcutKey="Tool.RemoveBg"  Tag ="RemoveBackground">
                    <MenuItem.Icon>
                        <Path Data="{DynamicResource RemoveBackground_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="14" Height="14"/>

                    </MenuItem.Icon>
                </MenuItem>

            <MenuItem Header="{DynamicResource L_Main_Ctx_AI_ChromaKey}" Style="{StaticResource Win11MenuItemStyle}" services:ShortcutService.ShortcutKey="Tool.ChromaKey" Tag ="ChromaKey" >
                    <MenuItem.Icon>
                        <Path Data="{DynamicResource ChromaKey_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="14" Height="14"/>
                    </MenuItem.Icon>
                </MenuItem>

            <MenuItem Header="{DynamicResource L_Main_Ctx_OCR}" Style="{StaticResource Win11MenuItemStyle}" services:ShortcutService.ShortcutKey="Tool.OCR"  Tag ="Ocr">
                    <MenuItem.Icon>
                        <TextBlock Text="✂" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    </MenuItem.Icon>
                </MenuItem>

            <MenuItem Header="{DynamicResource L_Main_Ctx_ScreenPicker}" Style="{StaticResource Win11MenuItemStyle}"  services:ShortcutService.ShortcutKey="Tool.ScreenPicker"  Tag ="ScreenColorPicker">
                    <MenuItem.Icon>
                        <TextBlock Text="🖌️" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    </MenuItem.Icon>
                </MenuItem>

            <MenuItem Header="{DynamicResource L_Main_Ctx_CopyHex}" Style="{StaticResource Win11MenuItemStyle}"  services:ShortcutService.ShortcutKey="Tool.CopyColorCode"   Tag ="CopyColorCode">
                    <MenuItem.Icon>
                        <TextBlock Text="🎨" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    </MenuItem.Icon>
                </MenuItem>
            <MenuItem Header="{DynamicResource L_Main_Ctx_AutoCrop}" Style="{StaticResource Win11MenuItemStyle}"  services:ShortcutService.ShortcutKey="Tool.AutoCrop"   Tag ="AutoCrop">
                    <MenuItem.Icon>
                        <TextBlock Text="✂" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    </MenuItem.Icon>
                </MenuItem>
            <MenuItem Header="{DynamicResource L_Main_Ctx_AddBorder}" Style="{StaticResource Win11MenuItemStyle}" services:ShortcutService.ShortcutKey="Tool.AddBorder"  Tag ="AddBorder">
                    <MenuItem.Icon>
                        <Border BorderBrush="{DynamicResource IconFillBrush}" BorderThickness="1.5" Width="14" Height="14" CornerRadius="1"/>
                    </MenuItem.Icon>
                </MenuItem>
            <MenuItem Header="{DynamicResource L_Main_Ctx_AI_SuperRes}" Style="{StaticResource Win11MenuItemStyle}" services:ShortcutService.ShortcutKey="Tool.AiUpscale"  Tag ="AiUpscale">
                    <MenuItem.Icon>
                        <TextBlock Text="🔍" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{DynamicResource L_Main_Ctx_OCR}" 
Style="{StaticResource Win11MenuItemStyle}" 
services:ShortcutService.ShortcutKey="Tool.AiOcr"  Tag ="AiOcr">
                    <MenuItem.Icon>
                        <!-- 可以换一个图标 -->
                        <TextBlock Text="🅰️" FontFamily="Segoe UI Emoji" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    </MenuItem.Icon>
                </MenuItem>

            </controls:DelayedMenuItem>
        </ContextMenu>
</ResourceDictionary>
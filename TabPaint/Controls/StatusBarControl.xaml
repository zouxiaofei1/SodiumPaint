<UserControl x:Class="TabPaint.Controls.StatusBarControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:app="clr-namespace:TabPaint"
             xmlns:local="clr-namespace:TabPaint.Controls"
             xmlns:behaviors="clr-namespace:TabPaint.Behaviors"
                       xmlns:services="clr-namespace:TabPaint.Services"
             mc:Ignorable="d" 
             MaxHeight="36"
             Height="36"
             d:DesignHeight="36" d:DesignWidth="1000">

    <UserControl.Resources>
        <ResourceDictionary>

        </ResourceDictionary>
    </UserControl.Resources>
    <StatusBar Background="{DynamicResource GlassBackgroundMediumBrush}" 
               Padding="0" 
               Cursor=""   
               Focusable="True"   
               MouseDown="OnStatusBarMouseDown" 
               SizeChanged="OnStatusBarSizeChanged">
        <StatusBarItem x:Name="StatusMousePos" Width="128" Margin="8,0">
            <StackPanel Orientation="Horizontal">
                <Path Data="{DynamicResource Cursor_Image}" Stretch="Uniform" Fill="Transparent" 
                      Stroke="{DynamicResource IconFillBrush}" 
                      StrokeThickness="1.2" StrokeLineJoin="Round" StrokeEndLineCap="Round" StrokeStartLineCap="Round" 
                      Width="15" Height="15"/>
                <TextBlock Margin="4,0,0,0" Text="{Binding MousePosition}" 
                           VerticalAlignment="Center" FontSize="11"
                           Foreground="{DynamicResource TextControlBrush}"/>
            </StackPanel>
        </StatusBarItem>
        <Separator x:Name="SepMousePos" Width="1" Height="14" Margin="2,0" 
                   Background="{DynamicResource BorderBrush}" 
                   Opacity="0.5"
                   VerticalAlignment="Center"/>

        <!-- 图片尺寸 -->
        <StatusBarItem x:Name="StatusImageSize"  Width="128" Margin="8,0">
            <StackPanel Orientation="Horizontal">
                <Path Data="{DynamicResource Picture_Image}" Stretch="Uniform" 
                      Fill="{DynamicResource IconFillBrush}" 
                      Width="16" Height="16"/>
                <TextBlock Margin="4,0,0,0" Text="{Binding ImageSize}" 
                           VerticalAlignment="Center" FontSize="11"
                           Foreground="{DynamicResource TextControlBrush}"/>
            </StackPanel>
        </StatusBarItem>

        <Separator x:Name="SepImageSize" Width="1" Height="14" Margin="2,0" 
                   Background="{DynamicResource BorderBrush}" 
                   Opacity="0.5"
                   VerticalAlignment="Center"/>


        <!-- 选区尺寸 -->
        <StatusBarItem x:Name="StatusSelectionSize" Width="128" Margin="8,0">
            <StackPanel Orientation="Horizontal">
                <Image Source="{DynamicResource Select_Image}" Width="16" Height="16" />
                <TextBlock Margin="4,0,0,0" Text="{Binding SelectionSize}" 
                           VerticalAlignment="Center" FontSize="11"
                           Foreground="{DynamicResource TextControlBrush}"/>
            </StackPanel>
        </StatusBarItem>

        <Separator x:Name="SepSelectionSize"  Width="1" Height="14" Margin="2,0" 
                   Background="{DynamicResource BorderBrush}"
                   Opacity="0.5"
                   VerticalAlignment="Center"/>

        <!-- 文件大小 -->
        <StatusBarItem x:Name="StatusFileSize" Width="110" Margin="8,0">
            <StackPanel Orientation="Horizontal">
                <Path Data="{DynamicResource Save_Button_Image}" Stretch="Uniform" 
                      Fill="{DynamicResource IconFillBrush}" 
                      Width="16" Height="16"/>
                <TextBlock Margin="4,0,0,0" Text="{Binding FileSize}" 
                           VerticalAlignment="Center" FontSize="11"
                           Foreground="{DynamicResource TextControlBrush}"/>
            </StackPanel>
        </StatusBarItem>

        <Separator x:Name="SepFileSize" Width="1" Height="14" Margin="2,0" 
                   Background="{DynamicResource BorderBrush}" 
                   Opacity="0.5"
                   VerticalAlignment="Center"/>
        <StatusBarItem>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
            </Grid>
        </StatusBarItem>

        <!-- 右侧控制区 -->
        <StatusBarItem HorizontalAlignment="Right">
            <StackPanel Orientation="Horizontal" Cursor="">

                <ToggleButton x:Name="FavoriteToggle"
                             Width="24" Height="24"
                             Margin="4,0,0,0" Padding="0"
                               services:ShortcutService.BaseToolTip="L_StatusBar_Favorite_ToolTip"
             services:ShortcutService.ShortcutKey="Tool.Favorite"
                             Style="{StaticResource RoundedMenuToggleButtonStyle}"
                             Click="OnFavoriteToggleClick">
                    <Path Data="{DynamicResource Favorite_Image}" Stretch="Uniform" 
                         Fill="{DynamicResource IconFillBrush}" 
                         Width="16" Height="16"/>
                </ToggleButton>
                
                <ToggleButton x:Name="ClipboardMonitorToggle"
                      Width="24" Height="24"
                      Margin="4,0,0,0" Padding="0"
                                    services:ShortcutService.BaseToolTip="L_StatusBar_ClipboardMonitor_ToolTip"
                 services:ShortcutService.ShortcutKey="Tool.ClipMonitor"
                      behaviors:AdvancedToolTipBehavior.EnableAdvancedToolTip="True"
       behaviors:AdvancedToolTipBehavior.DetailedToolTip="{DynamicResource L_ClipboardMonitorToggle_Detail}"
                      Style="{StaticResource RoundedMenuToggleButtonStyle}"
                      DataContext="{Binding Source={x:Static app:SettingsManager.Instance}, Path=Current}"
                      IsChecked="{Binding EnableClipboardMonitor, Mode=TwoWay}"
                      Click="OnClipboardMonitorToggleClick">
                    <Grid>
                        <Path Data="{DynamicResource ClipBoard_Image}" Stretch="Uniform" 
                              Fill="{DynamicResource IconFillBrush}" 
                              Width="16" Height="16" Opacity="0.8" RenderTransformOrigin="0.625,0.5"/>
                    </Grid>
                </ToggleButton>

                <!-- 适应窗口按钮 -->
                <Button Width="24" Height="24"               services:ShortcutService.BaseToolTip="L_StatusBar_FitToWindow"
               services:ShortcutService.ShortcutKey="View.FitToWindow" Margin="4,0,6,0" Padding="2,0" Style="{StaticResource RoundedMenuButtonStyle}" Click="OnFitToWindowClick">
                    <Path Data="{DynamicResource FitToWindow_Image}" Stretch="Uniform" 
                          Fill="{DynamicResource IconFillBrush}" 
                          Width="14" Height="14"/>
                </Button>

                <!-- 缩放下拉框 -->
                <ComboBox  Style="{StaticResource FluentComboBoxStyle}" x:Name="ZoomMenu" Margin="0,0,6,0" MaxHeight="26" Width="80" SelectionChanged="OnZoomMenuSelectionChanged" PreviewKeyDown="OnZoomMenuPreviewKeyDown" 
                           LostFocus="OnZoomMenuLostFocus" IsEditable="True"
                           Foreground="{DynamicResource TextControlBrush}">
                    <ComboBoxItem Content="12%" Tag="0.12"/>
                    <ComboBoxItem Content="25%" Tag="0.25"/>
                    <ComboBoxItem Content="50%" Tag="0.5"/>
                    <ComboBoxItem Content="75%" Tag="0.75"/>
                    <ComboBoxItem Content="100%" Tag="1.0"/>
                    <ComboBoxItem Content="125%" Tag="1.25"/>
                    <ComboBoxItem Content="150%" Tag="1.5"/>
                    <ComboBoxItem Content="200%" Tag="2.0"/>
                    <ComboBoxItem Content="400%" Tag="4.0"/>
                    <ComboBoxItem Content="600%" Tag="6.0"/>
                    <ComboBoxItem Content="800%" Tag="8.0"/>
                </ComboBox>

                <!-- 缩小按钮 -->
                <Button Width="24" Height="24" ToolTip="{DynamicResource L_StatusBar_ZoomOut}" Style="{StaticResource RoundedMenuButtonStyle}" Click="OnZoomOutClick" Margin="5,0,5,0" Padding="2,0">
                    <Image Source="{DynamicResource Zoom_Out_Image}" Width="16" Height="16"/>
                </Button>
                <!-- 缩放滑块 -->
                <Slider Style="{StaticResource Win11HorizontalSliderStyle}" 
                        Name="ZoomSlider" 
                        Minimum="0" 
                        Maximum="100" 
                        Width="120" 
                        IsSnapToTickEnabled="False" />

                <!-- 放大按钮 -->
                <Button Width="24" Height="24" ToolTip="{DynamicResource L_StatusBar_ZoomIn}" Style="{StaticResource RoundedMenuButtonStyle}" Click="OnZoomInClick" Margin="5,0,5,0" Padding="2,0">
                    <Image Source="{DynamicResource Zoom_In_Image}" Width="16" Height="16"/>
                </Button>
            </StackPanel>
        </StatusBarItem>
    </StatusBar>
</UserControl>

<Window x:Class="TabPaint.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TabPaint"
        xmlns:controls="clr-namespace:TabPaint.Controls"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=presentationframework"
        
        Title="{DynamicResource L_Settings_Title}" Height="500" Width="520"
        MinHeight="350" MinWidth="520"
        WindowStyle="None" ResizeMode="CanResize"
        WindowStartupLocation="CenterOwner"
 Background="Transparent"
        Foreground="{DynamicResource TextPrimaryBrush}">

    <!-- 移除 AllowsTransparency="False" 这一行，或者不设置它 -->

    <WindowChrome.WindowChrome>
        <!-- 确保 GlassFrameThickness 设置为 -1 以启用系统级玻璃效果 -->
        <shell:WindowChrome CaptionHeight="40" 
                            GlassFrameThickness="-1" 
                            CornerRadius="0" 
                            ResizeBorderThickness="4"
                            UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>


    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Resources/SubWindowStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local:NonLinearConverter x:Key="NonLinearConverter"/>
            <local:ColorMatchConverter x:Key="ColorMatchConverter"/>
            <Style x:Key="HamburgerButtonStyle" TargetType="Button" BasedOn="{StaticResource TitleBarButtonStyle}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="LayoutRoot" Background="{TemplateBinding Background}">
                                <!-- 这里使用 ContentPresenter，而不是 TextBlock，这样才能显示 Path -->
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="LayoutRoot" Property="Background" Value="#1FFFFFFF"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <!-- 导航项样式 -->
            <Style x:Key="NavListBoxItemStyle" TargetType="ListBoxItem">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Margin" Value="4,2"/>
                <Setter Property="Padding" Value="0"/>
                <!-- 注意：Padding 设为 0 -->
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListBoxItem">
                            <!-- 这里的 Border 负责背景色 -->
                            <Border x:Name="LayoutRoot" CornerRadius="4" 
                        Background="{TemplateBinding Background}"
                        SnapsToDevicePixels="True">
                                <Grid>
                                    <!-- 选中指示器 (最左侧的小竖条) -->
                                    <Border x:Name="SelectionIndicator" Width="3" Height="16" 
                                HorizontalAlignment="Left" VerticalAlignment="Center"
                                Background="{DynamicResource ThemeAccentBrush}"
                                CornerRadius="1.5" Visibility="Collapsed" Margin="0,0,0,0"/>

                                    <!-- 核心修复：ContentPresenter 负责显示 ListBoxItem 标签里的所有内容 -->
                                    <ContentPresenter HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="LayoutRoot" Property="Background" Value="{DynamicResource SubtleHoverBrush}"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="LayoutRoot" Property="Background" Value="{DynamicResource SubtleSelectedBrush}"/>
                                    <Setter TargetName="SelectionIndicator" Property="Visibility" Value="Visible"/>
                                </Trigger>
                                <!-- 按下效果 -->
                                <Trigger Property="IsMouseCaptured" Value="True">
                                    <Setter TargetName="LayoutRoot" Property="Background" Value="{DynamicResource SubtlePressedBrush}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>


            <!-- 窗口控制按钮样式 -->
            <Style x:Key="TitleBarButtonStyle" TargetType="Button">
                <Setter Property="Width" Value="46"/>
                <Setter Property="Height" Value="32"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Border" Background="{TemplateBinding Background}">
                                <TextBlock Text="{TemplateBinding Content}" FontFamily="Segoe MDL2 Assets" 
                     HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="10"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{DynamicResource SubtleHoverBrush}"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{DynamicResource SubtlePressedBrush}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="TitleBarCloseButtonStyle" TargetType="Button" BasedOn="{StaticResource TitleBarButtonStyle}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Border" Background="{TemplateBinding Background}">
                                <TextBlock Text="{TemplateBinding Content}" FontFamily="Segoe MDL2 Assets" 
    HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="10"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#C42B1C"/>
                                    <!-- 红色背景 -->
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#A82417"/>
                                    <Setter Property="Foreground" Value="#E6E6E6"/>
                                    <!-- 稍微灰一点的白 -->
                                    <Setter TargetName="Border" Property="Opacity" Value="1.0"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>


            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 标题栏 -->
            <RowDefinition Height="*"/>
            <!-- 内容 -->
        </Grid.RowDefinitions>

        <!-- 1. 自定义标题栏 -->
        <Grid Grid.Row="0" Background="{DynamicResource GlassBackgroundMediumBrush}" Height="32">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal" Grid.Column="0" VerticalAlignment="Center" Margin="0">
 
                <!-- 标题 -->
                <TextBlock Text="{DynamicResource L_Settings_Title}" 
                           VerticalAlignment="Center" Margin="18,0,0,0" 
                           FontSize="12" Foreground="{DynamicResource TextPrimaryBrush}"/>
            </StackPanel>

            <!-- 右侧：窗口控制按钮 -->
            <StackPanel Orientation="Horizontal" Grid.Column="2" HorizontalAlignment="Right">
                <Button x:Name="BtnMinimize" Style="{StaticResource TitleBarButtonStyle}" Content="&#xE921;" Click="BtnMinimize_Click"/>
                <Button x:Name="BtnMaximize" Style="{StaticResource TitleBarButtonStyle}" Content="&#xE922;" Click="BtnMaximize_Click"/>
                <Button x:Name="BtnClose" Style="{StaticResource TitleBarCloseButtonStyle}" Content="&#xE8BB;" Click="BtnClose_Click"/>
            </StackPanel>
        </Grid>

        <!-- 2. 主体区域 -->
        <Grid Grid.Row="1" Background="Transparent">
            <Grid.ColumnDefinitions>
                <!-- 侧边栏宽度，支持动画 -->
                <ColumnDefinition Width="Auto" x:Name="NavColumn"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧导航栏 -->
            <Border Grid.Column="0" x:Name="SidebarBorder" Width="220"  Background="{DynamicResource GlassBackgroundLowBrush}" 
                    BorderBrush="{DynamicResource BorderBrush}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <!-- 汉堡菜单 -->
                        <RowDefinition Height="*"/>
                        <!-- 上部列表 -->
                        <RowDefinition Height="Auto"/>
                        <!-- 底部列表 -->
                    </Grid.RowDefinitions>

                    <!-- 汉堡菜单按钮 -->
                    <Button Grid.Row="0" Click="HamburgerBtn_Click" 
        HorizontalAlignment="Left" Margin="0,0,0,4"
        Style="{StaticResource HamburgerButtonStyle}" 
        Width="46" Height="36">
                        <Path Data="M3,6 L17,6 M3,11 L17,11 M3,16 L17,16" 
          Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
          StrokeThickness="1" 
          Stretch="None" 
          VerticalAlignment="Center" 
          HorizontalAlignment="Center"/>
                    </Button>

                    <ListBox x:Name="NavListBox" Grid.Row="1"
         SelectionChanged="NavListBox_SelectionChanged"      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
         ScrollViewer.VerticalScrollBarVisibility="Disabled"
         Background="Transparent" BorderThickness="0" Margin="0,5,0,0"
         ItemContainerStyle="{StaticResource NavListBoxItemStyle}">
                        <ListBoxItem Tag="General" IsSelected="True">
                            <Grid Width="212" Height="40">
                                <Grid.ColumnDefinitions>
                                    <!-- 图标列，固定宽度，确保图标绝对居中 -->
                                    <ColumnDefinition Width="40"/>
                                    <!-- 文字列 -->
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <!-- 1. Path 不要加 Margin -->
                                <Path Grid.Column="0" 
              Data="{DynamicResource Settings_General_Image}" 
              Stretch="Uniform" 
              Fill="{DynamicResource IconFillBrush}" 
              Width="16" Height="16" 
              HorizontalAlignment="Center" VerticalAlignment="Center"/>

                                <!-- 文字：放在第1列 -->
                                <TextBlock Grid.Column="1" 
                   x:Name="TxtGeneral"
                   Text="{DynamicResource L_Settings_Nav_General}" 
                   VerticalAlignment="Center"  Foreground="{DynamicResource TextPrimaryBrush}"
                   Margin="8,0,0,0"
                   FontSize="12"/>
                            </Grid >
                        </ListBoxItem>
                        <ListBoxItem Tag="Paint">
                            <Grid Width="212" Height="40">
                                <Grid.ColumnDefinitions>
                                    <!-- 图标列，固定宽度，确保图标绝对居中 -->
                                    <ColumnDefinition Width="40"/>
                                    <!-- 文字列 -->
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Path  Data="{DynamicResource Paint_Mode_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                                <TextBlock Grid.Column="1" Foreground="{DynamicResource TextPrimaryBrush}" Margin="8,0,0,0" Text="{DynamicResource L_Settings_Nav_Paint}" VerticalAlignment="Center" x:Name="TxtPaint"/>
                       
                            </Grid>
                        </ListBoxItem>
                        <ListBoxItem Tag="View">
                            <Grid Width="212" Height="40">
                                <Grid.ColumnDefinitions>
                                    <!-- 图标列，固定宽度，确保图标绝对居中 -->
                                    <ColumnDefinition Width="40"/>
                                    <!-- 文字列 -->
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Path  Data="{DynamicResource View_Mode_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                                <TextBlock Grid.Column="1" Margin="8 ,0,0,0" Foreground="{DynamicResource TextPrimaryBrush}" Text="{DynamicResource L_Settings_Nav_View}" VerticalAlignment="Center" x:Name="TxtView"/>
                         
                            </Grid>
                        </ListBoxItem>
                        <ListBoxItem Tag="Shortcuts">
                            <Grid Width="212" Height="40">
                                <Grid.ColumnDefinitions>
                                    <!-- 图标列，固定宽度，确保图标绝对居中 -->
                                    <ColumnDefinition Width="40"/>
                                    <!-- 文字列 -->
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Path  Data="{DynamicResource Keyboard_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                                <TextBlock Grid.Column="1" Margin="8 ,0,0,0" Foreground="{DynamicResource TextPrimaryBrush}" Text="{DynamicResource L_Settings_Nav_Shortcuts}" VerticalAlignment="Center" x:Name="TxtShortcuts"/>
                          
                            </Grid>
                        </ListBoxItem>
                        <ListBoxItem Tag="Advanced">
                            <Grid Width="212" Height="40">
                                <Grid.ColumnDefinitions>
                                    <!-- 图标列，固定宽度，确保图标绝对居中 -->
                                    <ColumnDefinition Width="40"/>
                                    <!-- 文字列 -->
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Path Width="16" Height="16" 
                                      Fill="{DynamicResource IconFillBrush}"
                                      Data="M4.5 2A2.5 2.5 0 0 0 2 4.5v7A2.5 2.5 0 0 0 4.5 14h7a2.5 2.5 0 0 0 2.5-2.5v-7A2.5 2.5 0 0 0 11.5 2h-7ZM3 4.5A1.5 1.5 0 0 1 4.5 3h7A1.5 1.5 0 0 1 13 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5v-7ZM5.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5Zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Z" 
                                      Stretch="Uniform"/>
                                <TextBlock Grid.Column="1" Margin="8 ,0,0,0" Foreground="{DynamicResource TextPrimaryBrush}"  Text="{DynamicResource L_Settings_Nav_Advanced}" VerticalAlignment="Center" x:Name="TxtAdvanced"/>
                            </Grid>
                        </ListBoxItem>
                            
                    </ListBox>

                    <ListBox x:Name="BottomListBox" Grid.Row="2"
                             SelectionChanged="NavListBox_SelectionChanged"
                             Background="Transparent" BorderThickness="0" Margin="0,0,0,10"
                             ItemContainerStyle="{StaticResource NavListBoxItemStyle}" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
         ScrollViewer.VerticalScrollBarVisibility="Disabled">
                        <ListBoxItem Tag="About">
                            <Grid Width="212" Height="40">
                                <Grid.ColumnDefinitions>
                                    <!-- 图标列，固定宽度，确保图标绝对居中 -->
                                    <ColumnDefinition Width="40"/>
                                    <!-- 文字列 -->
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Path  Data="{DynamicResource Info_Image}" Stretch="Uniform" Fill="{DynamicResource IconFillBrush}" Width="16" Height="16"/>
                                <TextBlock Grid.Column="1" Margin="8 ,0,0,0"   Foreground="{DynamicResource TextPrimaryBrush}" Text="{DynamicResource L_Settings_Nav_About}" VerticalAlignment="Center" x:Name="TxtAbout"/>
                            </Grid>
                        </ListBoxItem>
                    </ListBox>
                </Grid>
            </Border>
            <!-- 右侧内容区 -->
            <Border Grid.Column="1" Background="Transparent" ClipToBounds="True">
                <Grid>
                    <ScrollViewer Style="{StaticResource FluentScrollViewer}" Padding="0" Margin="0" 
                          VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" PanningMode="None">
                <Grid>
                    <!-- 1. 通用 -->
                    <StackPanel x:Name="GeneralPanel" Visibility="Visible" Margin="24">
                        <TextBlock Text="{DynamicResource L_Settings_General_Title}" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,20" Foreground="{DynamicResource TextPrimaryBrush}"/>

                        <TextBlock Text="{DynamicResource L_Settings_General_Startup_Header}" FontWeight="SemiBold" FontSize="16" Margin="0,5,0,10" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_General_AutoLoadFolderImages_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_General_AutoLoadFolderImages_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <CheckBox Grid.Column="2" Style="{StaticResource FluentCheckBoxStyle}" 
                                      IsChecked="{Binding Path=Current.AutoLoadFolderImages, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      VerticalAlignment="Center"/>
                        </Grid>
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_General_StartInViewMode_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_General_StartInViewMode_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <CheckBox Grid.Column="2" Style="{StaticResource FluentCheckBoxStyle}" 
                                      IsChecked="{Binding Path=Current.StartInViewMode, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      VerticalAlignment="Center"/>
                        </Grid>
                        <Separator Margin="0,10,0,10" Background="{DynamicResource BorderLightBrush}"/>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="200"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_General_MouseWheel_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_General_MouseWheel_Desc}" Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <ComboBox Grid.Column="1" 
                                      Style="{StaticResource FluentComboBoxStyle}"
                                      SelectedValue="{Binding Path=Current.ResamplingMode, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      SelectedValuePath="Tag"
                                      Height="30" VerticalContentAlignment="Center">
                                <ComboBoxItem Content="{DynamicResource L_Settings_General_MouseWheel_Option_Auto}" Tag="Auto"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_General_MouseWheel_Option_Up}" Tag="Up"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_General_MouseWheel_Option_Switch}" Tag="Switch"/>
                            </ComboBox>
                        </Grid>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="200"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_General_Theme_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_General_Theme_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <ComboBox Grid.Column="1" 
                                      Style="{StaticResource FluentComboBoxStyle}"
                                      SelectedValue="{Binding Path=Current.ThemeMode, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      SelectedValuePath="Tag"
                                      Height="30" VerticalContentAlignment="Center">
                                <ComboBoxItem Content="{DynamicResource L_Settings_General_Theme_Option_System}" Tag="System"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_General_Theme_Option_Light}" Tag="Light"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_General_Theme_Option_Dark}" Tag="Dark"/>
                            </ComboBox>
                        </Grid>
                        <Grid Margin="0,15,0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel VerticalAlignment="Top">
                                <TextBlock Text="{DynamicResource L_Settings_General_Accent_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_General_Accent_Desc}" 
                   Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <!-- 颜色选择区域 -->
                            <ItemsControl Grid.Column="1">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.Resources>
                                    <!-- 定义颜色块样式 -->
                                    <Style TargetType="RadioButton" x:Key="ColorRadioStyle">
                                        <Setter Property="Width" Value="32"/>
                                        <Setter Property="Height" Value="32"/>
                                        <Setter Property="Margin" Value="0,0,10,5"/>
                                        <Setter Property="Cursor" Value="Hand"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="RadioButton">
                                                    <Grid>
                                                        <!-- 选中时的外圈 -->
                                                        <Border x:Name="SelectionBorder" 
                                        CornerRadius="16" 
                                        BorderThickness="2" 
                                        BorderBrush="{Binding Background, RelativeSource={RelativeSource TemplatedParent}}"
                                        Opacity="0"
                                        Width="32" Height="32"/>
                                                        <!-- 颜色主体 -->
                                                        <Border Width="22" Height="22" CornerRadius="11" 
                                        Background="{Binding Background, RelativeSource={RelativeSource TemplatedParent}}"
                                        HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        <!-- 选中时的勾 -->
                                                        <Path x:Name="CheckMark" Data="M2,6 L5,9 L10,3" Stroke="White" StrokeThickness="2" 
                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                      Visibility="Collapsed"/>
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsChecked" Value="True">
                                                            <Setter TargetName="SelectionBorder" Property="Opacity" Value="1"/>
                                                            <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ItemsControl.Resources>


                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#0078D4" 
                     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance}, Converter={StaticResource ColorMatchConverter}, ConverterParameter=#0078D4}"
                     Command="{Binding SetColorCommand}" CommandParameter="#0078D4"/>

                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#9333EA"
                     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance},  Converter={StaticResource ColorMatchConverter}, ConverterParameter=#9333EA}"
                     Command="{Binding SetColorCommand}" CommandParameter="#9333EA"/>

                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#107C10"
                     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance},  Converter={StaticResource ColorMatchConverter}, ConverterParameter=#107C10}"
                     Command="{Binding SetColorCommand}" CommandParameter="#107C10"/>

                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#D13438"
                     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance}, Converter={StaticResource ColorMatchConverter}, ConverterParameter=#D13438}"
                     Command="{Binding SetColorCommand}" CommandParameter="#D13438"/>

                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#E3008C"
                     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance}, Converter={StaticResource ColorMatchConverter}, ConverterParameter=#E3008C}"
                     Command="{Binding SetColorCommand}" CommandParameter="#E3008C"/>

                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#505050"
                     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance}, Converter={StaticResource ColorMatchConverter}, ConverterParameter=#505050}"
                     Command="{Binding SetColorCommand}" CommandParameter="#505050"/>
                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#FF8C00"
     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance}, Converter={StaticResource ColorMatchConverter}, ConverterParameter=#FF8C00}"
     Command="{Binding SetColorCommand}" CommandParameter="#FF8C00"/>

                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#00B294"
     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance}, Converter={StaticResource ColorMatchConverter}, ConverterParameter=#00B294}"
     Command="{Binding SetColorCommand}" CommandParameter="#00B294"/>

                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#4F46E5"
     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance}, Converter={StaticResource ColorMatchConverter}, ConverterParameter=#4F46E5}"
     Command="{Binding SetColorCommand}" CommandParameter="#4F46E5"/>
                                <RadioButton Style="{StaticResource ColorRadioStyle}" Background="#FFB900"
     IsChecked="{Binding Path=Current.ThemeAccentColor, Source={x:Static local:SettingsManager.Instance}, Converter={StaticResource ColorMatchConverter}, ConverterParameter=#FFB900}"
     Command="{Binding SetColorCommand}" CommandParameter="#FFB900"/>

                            </ItemsControl>
                        </Grid>

                        <!-- 语言设置 -->
                        <Separator Margin="0,15,0,10" Background="{DynamicResource BorderLightBrush}"/>
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="200"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_General_Language_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_General_Language_Desc}"
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <ComboBox Grid.Column="1"
                                      Style="{StaticResource FluentComboBoxStyle}"
                                      SelectedValue="{Binding Path=Current.Language, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      SelectedValuePath="Tag"
                                      Height="30" VerticalContentAlignment="Center">
                                <ComboBoxItem Content="{DynamicResource L_Settings_General_Language_Option_Zh}" Tag="ChineseSimplified"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_General_Language_Option_En}" Tag="English"/>
                            </ComboBox>
                        </Grid>

                    </StackPanel>

                    <!-- 2. 画图设置 -->
                    <StackPanel x:Name="PaintPanel" Visibility="Collapsed" Margin="24">
                        <TextBlock Text="{DynamicResource L_Settings_Paint_Title}" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,20" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="{DynamicResource L_Settings_Paint_Habits_Header}" FontWeight="SemiBold" FontSize="16" Margin="0,5,0,10" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_Paint_AutoPopupClipboard_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_Paint_AutoPopupClipboard_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <CheckBox Grid.Column="2" Style="{StaticResource FluentCheckBoxStyle}" 
                                      IsChecked="{Binding Path=Current.AutoPopupOnClipboardImage, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      VerticalAlignment="Center"/>
                        </Grid>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="200"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_Paint_SelectionClear_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_Paint_SelectionClear_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <ComboBox Grid.Column="1" 
                                      Style="{StaticResource FluentComboBoxStyle}"
                                      SelectedValue="{Binding Path=Current.SelectionClearMode, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      SelectedValuePath="Tag"
                                      Height="30" VerticalContentAlignment="Center">
                                <ComboBoxItem Content="{DynamicResource L_Settings_Paint_SelectionClear_Transparent}" Tag="Transparent"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_Paint_SelectionClear_White}" Tag="White"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_Paint_SelectionClear_PreserveAlpha}" Tag="PreserveAlpha"/>
                            </ComboBox>
                        </Grid>
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_Paint_EnableFileDelete_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_Paint_EnableFileDelete_Desc}" 
                   Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <CheckBox Grid.Column="2" Style="{StaticResource FluentCheckBoxStyle}" 
              IsChecked="{Binding Path=Current.EnableFileDeleteInPaintMode, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
              VerticalAlignment="Center"/>
                        </Grid>
                        <Separator Margin="0,15" Background="{DynamicResource BorderLightBrush}"/>
                    </StackPanel>

                    <!-- 3. 看图设置 -->
                    <StackPanel x:Name="ViewPanel" Visibility="Collapsed" Margin="24">
                        <TextBlock Text="{DynamicResource L_Settings_View_Title}" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,20" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="{DynamicResource L_Settings_View_Habits_Header}" FontWeight="SemiBold" FontSize="16" Margin="0,5,0,10" Foreground="{DynamicResource TextPrimaryBrush}"/>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="200"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_View_MouseWheel_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_View_MouseWheel_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <ComboBox Grid.Column="1" 
                                      Style="{StaticResource FluentComboBoxStyle}"
                                      SelectedValue="{Binding Path=Current.ViewMouseWheelMode, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      SelectedValuePath="Tag"
                                      Height="30" VerticalContentAlignment="Center">
                                <ComboBoxItem Content="{DynamicResource L_Settings_View_MouseWheel_Zoom}" Tag="Zoom"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_View_MouseWheel_Switch}" Tag="SwitchImage"/>
                            </ComboBox>
                        </Grid>

                        <Separator Margin="0,15" Background="{DynamicResource BorderLightBrush}"/>
                        <TextBlock Text="{DynamicResource L_Settings_View_Display_Header}" FontWeight="SemiBold" FontSize="16" Margin="0,5,0,10" Foreground="{DynamicResource TextPrimaryBrush}"/>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_View_DarkBg_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_View_DarkBg_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <CheckBox Grid.Column="2" Style="{StaticResource FluentCheckBoxStyle}" 
                                      IsChecked="{Binding Path=Current.ViewUseDarkCanvasBackground, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      VerticalAlignment="Center"/>
                        </Grid>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_View_TransparentGrid_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_View_TransparentGrid_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <CheckBox Grid.Column="2" Style="{StaticResource FluentCheckBoxStyle}" 
                                      IsChecked="{Binding Path=Current.ViewShowTransparentGrid, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      VerticalAlignment="Center"/>
                        </Grid>

                        <Separator Margin="0,15" Background="{DynamicResource BorderLightBrush}"/>
                    </StackPanel>

                    <!-- 4. 快捷键设置 -->
                    <StackPanel x:Name="ShortcutPanel" Visibility="Collapsed"  Margin="24,24,44,24">
                        <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Title}" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,10" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <StackPanel Margin="0,0,10,10">

                            <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Group_ViewNav}" FontWeight="Bold" Margin="0,10,0,5"/>

                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock  Text="{DynamicResource L_Settings_Shortcuts_ToggleMode}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.ToggleMode], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_PrevImage}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.PrevImage], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_NextImage}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.NextImage], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_FullScreen}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.FullScreen], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Minimize}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.ToggleMinimize], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_RotateLeft}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.RotateLeft], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_RotateRight}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.RotateRight], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_VFlip}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.VerticalFlip], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_HFlip}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[View.HorizontalFlip], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <!-- 第 1.5 组：基础绘图工具 -->
                            <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Group_BasicTools}" FontWeight="Bold" Margin="0,15,0,5"/>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_Select}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.SwitchToSelect], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_Pen}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.SwitchToPen], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_Eyedropper}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.SwitchToPick], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_Eraser}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.SwitchToEraser], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>



                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_Fill}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.SwitchToFill], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_Text}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.SwitchToText], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_Brush}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.SwitchToBrush], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_Shape}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.SwitchToShape], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <!-- 第二组：高级工具 -->
                            <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Group_AdvancedTools}" FontWeight="Bold" Margin="0,15,0,5"/>

                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_ClipMonitor}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.ClipMonitor], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <!-- 1. AI 移除背景 -->
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_RemoveBg}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.RemoveBg], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <!-- 2. AI 绿幕抠图 (新增) -->
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_ChromaKey}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.ChromaKey], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <!-- 3. OCR 文字识别 -->
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_OCR}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.OCR], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <!-- 4. 屏幕取色器 -->
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_ScreenPicker}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.ScreenPicker], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <!-- 5. 复制 HEX 色值 (新增) -->
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_CopyHex}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.CopyColorCode], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <!-- 6. 智能裁切空白 (新增) -->
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_AutoCrop}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.AutoCrop], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <!-- 7. 图片加边框 (新增) -->
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Tool_AddBorder}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Tool.AddBorder], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>

                            <!-- 第三组：文件操作 -->
                            <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Group_FileOps}" FontWeight="Bold" Margin="0,15,0,5"/>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_OpenWorkspace}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[File.OpenWorkspace], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_PasteNewTab}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[File.PasteNewTab], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <!-- 第四组：图像效果 -->
                            <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Group_Effects}" FontWeight="Bold" Margin="0,15,0,5"/>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Effect_BCE}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Effect.Brightness], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Effect_TTS}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Effect.Temperature], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Effect_BW}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Effect.Grayscale], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Effect_Invert}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Effect.Invert], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Effect_AutoLevels}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Effect.AutoLevels], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                            <Grid Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="180"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource L_Settings_Shortcuts_Effect_Resize}" VerticalAlignment="Center"/>
                                <controls:ShortcutRecorder Grid.Column="1" CurrentItem="{Binding Path=Current.Shortcuts[Effect.Resize], Source={x:Static local:SettingsManager.Instance}}"/>
                            </Grid>
                        </StackPanel>


                        <!-- 恢复默认快捷键按钮 -->
                        <Button Grid.Row="2" 
                                Content="{DynamicResource L_Settings_ResetShortcuts}" 
                                HorizontalAlignment="Left" 
                                Foreground="{DynamicResource DangerBrush}" 
                                Background="Transparent" 
                                BorderThickness="0"
                                Click="ResetShortcuts_Click"
                                Cursor="Hand"
                                 Style="{StaticResource Win11SecondaryButtonStyle}"
                                Margin="0,0,0,5"/>
                    </StackPanel>

                    <!-- 5. 高级 -->
                    <StackPanel x:Name="AdvancedPanel" Visibility="Collapsed" Margin="24,24,44,24">
                        <TextBlock Text="{DynamicResource L_Settings_Advanced_Title}" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,20" Foreground="{DynamicResource TextPrimaryBrush}"/>

                        <TextBlock Text="{DynamicResource L_Settings_Advanced_Render_Header}" FontWeight="SemiBold" FontSize="16" Margin="0,5,0,10" Foreground="{DynamicResource TextPrimaryBrush}"/>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="220"/>
                                <ColumnDefinition Width="200"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_Advanced_Resampling_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_Advanced_Resampling_Desc}" Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <ComboBox Grid.Column="1" 
                                      Style="{StaticResource FluentComboBoxStyle}"
                                      SelectedValue="{Binding Path=Current.ResamplingMode, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      SelectedValuePath="Tag"
                                      Height="30" VerticalContentAlignment="Center">
                                <ComboBoxItem Content="{DynamicResource L_Settings_Advanced_Resampling_Option_Auto}" Tag="Auto"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_Advanced_Resampling_Option_Bilinear}" Tag="Bilinear"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_Advanced_Resampling_Option_Fant}" Tag="Fant"/>
                                <ComboBoxItem Content="{DynamicResource L_Settings_Advanced_Resampling_Option_HighQuality}" Tag="HighQuality"/>
                            </ComboBox>
                        </Grid>

                        <Separator Margin="0,15" Background="{DynamicResource BorderLightBrush}"/>

                        <TextBlock Text="{DynamicResource L_Settings_Advanced_PixelThreshold_Title}" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,5" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock Text="{DynamicResource L_Settings_Advanced_PixelThreshold_Desc}" 
                                   Foreground="{DynamicResource TextTertiaryBrush}" FontSize="12" TextWrapping="Wrap" Margin="0,0,0,15"/>

                        <!-- 看图模式阈值 -->
                        <Grid Margin="0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="70"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{DynamicResource L_Settings_Advanced_PixelThreshold_ViewMode}" VerticalAlignment="Center"/>

                            <Slider Grid.Column="1" Margin="0,0,10,0" Style="{StaticResource Win11HorizontalSliderStyle}"
                                    Minimum="0" Maximum="100" 
                                    SmallChange="1" LargeChange="10"
                                    IsSnapToTickEnabled="False"
                                    VerticalAlignment="Center"
                                    Value="{Binding Path=Current.ViewInterpolationThreshold, Converter={StaticResource NonLinearConverter}, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"/>

                            <TextBox Grid.Column="2" 
                                     Text="{Binding Path=Current.ViewInterpolationThreshold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0}, Source={x:Static local:SettingsManager.Instance}}"
                                     LostFocus="TextBox_LostFocus"
                                     PreviewTextInput="NumberValidationTextBox"
                                     HorizontalContentAlignment="Right" 
                                     VerticalAlignment="Center"
                                     Height="24" Padding="0,2,4,0"/>
                        </Grid>

                        <!-- 画图模式阈值 -->
                        <Grid Margin="0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="70"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{DynamicResource L_Settings_Advanced_PixelThreshold_PaintMode}" VerticalAlignment="Center"/>

                            <Slider Grid.Column="1" Margin="0,0,10,0" Style="{StaticResource Win11HorizontalSliderStyle}"
                                    Minimum="0" Maximum="100" 
                                    SmallChange="1" LargeChange="10"
                                    VerticalAlignment="Center"
                                    Value="{Binding Path=Current.PaintInterpolationThreshold, Converter={StaticResource NonLinearConverter}, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"/>

                            <TextBox Grid.Column="2" 
                                     Text="{Binding Path=Current.PaintInterpolationThreshold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0}, Source={x:Static local:SettingsManager.Instance}}"
                                     PreviewTextInput="NumberValidationTextBox"
                                     LostFocus="TextBox_LostFocus"
                                     HorizontalContentAlignment="Right" 
                                     VerticalAlignment="Center"
                                     Height="24" Padding="0,2,4,0"/>
                        </Grid>

                        <Separator Margin="0,15" Background="{DynamicResource BorderLightBrush}"/>
                        <TextBlock Text="{DynamicResource L_Settings_Advanced_Habits_Header}" FontWeight="SemiBold" FontSize="16" Margin="0,15,0,10" Foreground="{DynamicResource TextPrimaryBrush}"/>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                <TextBlock Text="{DynamicResource L_Settings_Advanced_SkipResetConfirm_Title}"/>
                                <TextBlock Text="{DynamicResource L_Settings_Advanced_SkipResetConfirm_Desc}" 
                                           Foreground="{DynamicResource TextTertiaryBrush}" FontSize="11" Margin="0,2,0,0"/>
                            </StackPanel>

                            <CheckBox Grid.Column="2" Style="{StaticResource FluentCheckBoxStyle}" 
                                      IsChecked="{Binding Path=Current.SkipResetConfirmation, Mode=TwoWay, Source={x:Static local:SettingsManager.Instance}}"
                                      VerticalAlignment="Center"/>
                        </Grid>

                        <Separator Margin="0,15" Background="{DynamicResource BorderLightBrush}"/>

                        <TextBlock Text="{DynamicResource L_Settings_Advanced_Maintenance_Header}" FontWeight="SemiBold" FontSize="16" Margin="0,5,0,10" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Button Content="{DynamicResource L_Settings_Advanced_FactoryReset}" Width="120" Height="32" 
                                    HorizontalAlignment="Left" Click="FactoryReset_Click"
                                    Background="{DynamicResource ButtonBackgroundBrush}" 
                                    Foreground="{DynamicResource DangerBrush}" 
                                    BorderBrush="{DynamicResource DangerBrush}"
                                     Style="{StaticResource Win11SecondaryButtonStyle}"
                                    BorderThickness="1"/>

                            <TextBlock Grid.Column="1" Text="{DynamicResource L_Settings_Advanced_FactoryReset_Button}" 
                                       VerticalAlignment="Center" Margin="15,0,0,0" 
                                       Foreground="{DynamicResource TextTertiaryBrush}"/>
                        </Grid>

                    </StackPanel>

                    <!-- 6. 关于页 -->
                    <!-- 6. 关于页 -->
                    <StackPanel x:Name="AboutPanel" Visibility="Collapsed" Margin="24,24,44,24">

                        <!-- 顶部信息区域 -->
                        <Border Background="Transparent" 
            HorizontalAlignment="Center"
            MaxWidth="400">

                            <StackPanel HorizontalAlignment="Center">

                                <!-- 1. 图标 (移除导致偏斜的 Margin，只保留下边距) -->
                                <Image x:Name="AppIcon" 
                   Source="pack://application:,,,/Resources/TabPaint.ico" 
                   Width="84" Height="84" 
                   HorizontalAlignment="Center" 
                   RenderOptions.BitmapScalingMode="HighQuality"
                   Margin="0,0,0,16"/>

                                <!-- 2. 应用名称 (移除左边距，确保居中) -->
                                <TextBlock Text="TabPaint" 
                       HorizontalAlignment="Center"
                       FontSize="22" 
                       FontWeight="SemiBold" 
                       Foreground="{DynamicResource TextPrimaryBrush}"/>

                                <!-- 3. 副标题 (移除左边距，确保居中) -->
                                <TextBlock Text="{DynamicResource L_Settings_About_Subtitle}" 
                       HorizontalAlignment="Center"
                       Foreground="{DynamicResource TextSecondaryBrush}" 
                       FontSize="12" 
                       Margin="0,8,0,16"/>

                                <!-- 4. 开发者与版本号 (徽章样式) -->
                                <!-- 使用 WrapPanel 或 StackPanel Orientation="Horizontal" 让它们在同一行 -->
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">

                                    <!-- 开发者徽章 -->
                                            <Border BorderBrush="{DynamicResource BorderLightBrush}"  Background="{DynamicResource GlassBackgroundMediumBrush}" BorderThickness="1" CornerRadius="4" Padding="8,4" Margin="0,0,8,0">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{DynamicResource L_Settings_About_Developer}" Foreground="{DynamicResource TextTertiaryBrush}" Margin="0,0,4,0" FontSize="11"/>
                                            <TextBlock Text="zouxiaofei1" Foreground="{DynamicResource TextPrimaryBrush}" FontSize="11" FontWeight="SemiBold"/>
                                                </StackPanel> 
                                            </Border>

                                    <!-- 版本号徽章 (使用不同的背景色，例如稍微亮一点或带一点品牌色，这里用深灰色示例) -->
                                            <Border BorderBrush="{DynamicResource BorderLightBrush}" Background="{DynamicResource GlassBackgroundMediumBrush}" BorderThickness="1" CornerRadius="4" Padding="8,4">
                                        <StackPanel Orientation="Horizontal">
                                  
                                            <TextBlock Text="Ver." Foreground="{DynamicResource TextTertiaryBrush}" Margin="0,0,4,0" FontSize="11"/>
                                            <TextBlock Text="{Binding ProgramVersion}" Foreground="{DynamicResource TextPrimaryBrush}" FontSize="11"/>
                                        </StackPanel>
                                    </Border>

                                </StackPanel>

                            </StackPanel>
                        </Border>

                        <!-- 分割线 -->
                        <Separator Margin="0,15" Background="{DynamicResource BorderLightBrush}" Width="400" HorizontalAlignment="Center"/>

                        <!-- 按钮区域 -->
                        <StackPanel Margin="0,10,0,0" HorizontalAlignment="Center" Width="300">

                            <!-- 统一样式资源 (保持不变) -->
                            <StackPanel.Resources>
                                <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                                    <Setter Property="Height" Value="36"/>
                                    <Setter Property="Margin" Value="0,0,0,10"/>
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
                                    <Setter Property="BorderThickness" Value="1"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="border" 
                                    Background="{TemplateBinding Background}" 
                                    BorderBrush="{TemplateBinding BorderBrush}" 
                                    BorderThickness="{TemplateBinding BorderThickness}" 
                                    CornerRadius="10">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter TargetName="border" Property="Background" Value="{DynamicResource ChromeMediumBrush}"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                                <Style TargetType="Hyperlink">
                                    <Setter Property="TextDecorations" Value="None"/>
                                    <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                                </Style>
                            </StackPanel.Resources>

                            <!-- GitHub 按钮 -->
                                    <Button Cursor="Hand" Background="{DynamicResource GlassBackgroundMediumBrush}">
                                <TextBlock>
                <Hyperlink NavigateUri="https://github.com/zouxiaofei1/TabPaint" RequestNavigate="Hyperlink_RequestNavigate">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="&#xE943;" FontFamily="Segoe MDL2 Assets" Margin="0,1,8,0"/>
                        <TextBlock Text="{DynamicResource L_Settings_About_Github}"/>
                    </StackPanel>
                </Hyperlink>
            </TextBlock>
                            </Button>

                            <!-- 检查更新 按钮 -->
                                    <Button Cursor="Hand" Background="{DynamicResource GlassBackgroundMediumBrush}">
                                <TextBlock>
                <Hyperlink NavigateUri="https://github.com/zouxiaofei1/TabPaint/releases" RequestNavigate="Hyperlink_RequestNavigate">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="&#xE895;" FontFamily="Segoe MDL2 Assets" Margin="0,1,8,0"/>
                        <TextBlock Text="{DynamicResource L_Settings_About_CheckUpdate}"/>
                    </StackPanel>
                </Hyperlink>
            </TextBlock>
                            </Button>

                            <!-- 帮助文档 按钮 -->
                                    <Button Cursor="Hand" Background="{DynamicResource GlassBackgroundMediumBrush}">
                                <TextBlock>
                <Hyperlink NavigateUri="https://zouxiaofei1.github.io/tabpaint-site/guide/start/installation.html" RequestNavigate="Hyperlink_RequestNavigate">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="&#xE897;" FontFamily="Segoe MDL2 Assets" Margin="0,1,8,0"/>
                        <TextBlock Text="{DynamicResource L_Settings_About_Help}"/>
                    </StackPanel>
                </Hyperlink>
            </TextBlock>
                            </Button>

                        </StackPanel>

                    </StackPanel>

                </Grid>
                    </ScrollViewer>
                    <Border x:Name="SavedToast" 
        Background="{DynamicResource ThemeAccentBrush}" 
        HorizontalAlignment="Right" VerticalAlignment="Top" 
        Margin="0,30,-300,0" Padding="16,10" CornerRadius="4"
        Opacity="0" IsHitTestVisible="False">
                        <!-- Margin 右侧设为负数或者通过动画控制 TranslateTransform 更好，
         这里为了简单，初始状态 Opacity=0，位置在右上角 -->
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
                        </Border.Effect>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE73E;" FontFamily="Segoe MDL2 Assets" Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,8,0" VerticalAlignment="Center"/>
                            <TextBlock Text="{DynamicResource L_Settings_Toast_Saved}" Foreground="{DynamicResource TextPrimaryBrush}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                </Grid>
                
        </Border>

        </Grid>
    </Grid>
</Window>

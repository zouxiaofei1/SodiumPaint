<Window x:Class="TabPaint.ColorPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ColorPicker" 
        WindowStyle="None" 
        ResizeMode="NoResize" 
        Topmost="True" 
        ShowInTaskbar="False"
        Cursor="Cross" 
        WindowState="Maximized"
        Background="Transparent"
        AllowsTransparency="True"
        KeyDown="Window_KeyDown"
        MouseDown="Window_MouseDown"
        MouseMove="Window_MouseMove"
        Loaded="ColorPickerWindow_Loaded">

    <Grid>
        <Image Name="ScreenShotImage" Stretch="Fill" />

        <Canvas Name="OverlayCanvas">
            <Border Name="Magnifier" Width="120" Height="120" 
                    BorderBrush="{DynamicResource SystemAccentBrush}" 
                    BorderThickness="2" 
                   
                    Visibility="Collapsed">

                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                </Border.Effect>

                <Grid ClipToBounds="True">
                    <Rectangle RenderOptions.BitmapScalingMode="NearestNeighbor">
                        <Rectangle.Fill>
                            <VisualBrush Visual="{Binding ElementName=ScreenShotImage}" 
                                         x:Name="ZoomBrush"
                                         ViewboxUnits="Absolute"/>
                        </Rectangle.Fill>
                    </Rectangle>
                    <Rectangle Width="12" Height="12" 
                               HorizontalAlignment="Center" VerticalAlignment="Center"
                               Stroke="{DynamicResource SystemAccentBrush}" 
                               StrokeThickness="1" 
                               SnapsToDevicePixels="True"/>
                    <Border VerticalAlignment="Bottom" 
                            Background="{DynamicResource TextPrimaryBrush}" 
                            Opacity="0.75"
                            Height="24">
                        <TextBlock Name="ColorText" Text="#FFFFFF" 
                                   HorizontalAlignment="Center" VerticalAlignment="Center" 
                                   Foreground="{DynamicResource TextInverseBrush}" 
                                   FontWeight="Bold" FontFamily="Consolas" FontSize="11"/>
                    </Border>
                </Grid>
            </Border>
        </Canvas>
    </Grid>
</Window>
